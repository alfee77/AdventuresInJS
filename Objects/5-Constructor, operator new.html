<!DOCTYPE html>

<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="../root-css/styles.css">
</head>

<body>
    <div class="header" id="header"></div>
    <div class="topnav" id="topnav"></div>
    <div class="row">
        <div class="column side" id="column side left"></div>
        <div class="column middle">
            <h2>Constructors and the <code>new</code> operator</h2>
            <h3>Introduction</h3>
            <p>So this is where we start to get into a wee bit more familiar territory (for me at least!). The
                <code>let object = {...}</code> syntax allows us to create a single object. What if we want to create
                lots of objects of the same type? We can use so called "constructor functions" to create objects. They
                are normal functions however the following two conventions should be observed:
            </p>

            <ol>
                <li>The function name should be capitalised, and</li>
                <li>they should be used with the <code>new</code> operator</li>
            </ol>
            <p>Consider the user object example:</p>


            <div class="codeLines">
function User(name){
    this.name = name;
    this.isAdmin = false;
}

let user1 = new User("Thomas");
let user2 = new User("Fiona");

alert(`${user1.name} says hi! ${user2.name} says howdy!`);

<button onclick="example1()">Example 1</button>
    </div>
            <h3>Methods in a constructor function</h3>
            <p>Using constructor functions to create objects gives a great deal of flexibility. The constructor function
                may have parameters that define how to construct the object, and what to put in it.</p>

            <p>Of course, we can add to this not only properties, but methods as well.</p>

            <p>For instance, new User(name) below creates an object with the given name and the method sayHi:</p>

            <div class="codeLines">
        
function User(name="Alistair", age=32, occupation="JSMonkey") {
    this.name = name;
    this.age = age;
    this.occupation = occupation;
        
    this.sayHi = function () {
        alert(`My name is: ${this.name}, and I'm ${this.age} years old. I fill my day working as a(n) ${this.occupation}`);
    };
}
        
let john = new User("John", 47, "Electrical Engineer");
        
john.sayHi(); <span class="comment">//My name is: John</span>
                
<span class="comment">/*
john = {
    name: "John",
    sayHi: function() { ... }
}
*/</span>

<button onclick="example2()">Example 2</button>
            </div>
            <p>To create complex objects, there’s a more advanced syntax, classes, that we’ll cover later.</p>
            <h3>Summary</h3>
            <ul>
                <li>Constructor functions or, briefly, constructors, are regular functions, but there’s a common
                    agreement to name them with capital letter first.</li>
                <li>Constructor functions should only be called using <code>new</code>. Such a call implies a creation
                    of empty <code>this</code> at the start and returning the populated one at the end.</li>
            </ul>

            <p>We can use constructor functions to make multiple similar objects.</p>

            <p>JavaScript provides constructor functions for many built-in language objects: like Date for dates, Set
                for sets and others that we plan to study.</p>

            <h3>Tasks</h3>
            <h4>Task 1 - Two functions, one object</h4>
            <p>importance: 2</p>
            <p>Is it possible to create functions A and B so that new A() == new B()?</p>

            <div class="codeLines">
function A() { ... }
function B() { ... }
                
let a = new A();
let b = new B();
                
alert( a == b ); // true

            </div>
            <p>If it is, then provide an example of their code.</p>
            <h4>Solution</h4>
            <div class="codeLines">
let obj = {};
function A() { return obj }
function B() { return obj }

let a = new A();
let b = new B();

alert( a == b ); <span class="comment">// true</span>

<button onclick="task1()">Solution</button>

            </div>
            <h4>Task 2 - Create new Calculator</h4>
            <p>importance: 5</p>
            <p>Create a constructor function Calculator that creates objects with 3 methods:</p>
            <ol>
                <li>read() prompts for two values and saves them as object properties with names a and b respectively.</li>
                <li>sum() returns the sum of these properties.</li>
                <li>mul() returns the multiplication product of these properties.</li>
            </ol>
            <p>For instance:</p>

<div class="codeLines">
let calculator = new Calculator();
calculator.read();

alert( "Sum=" + calculator.sum() );
alert( "Mul=" + calculator.mul() );

            </div>

            <h4>Solution</h4>

            <div class="codeLines">
let calculator = new Calculator();
calculator.read();

alert( "Sum=" + calculator.sum() );
alert( "Mul=" + calculator.mul() );


function Calculator(){
    this.read = function(){
        this.a = +prompt("Enter a value for a: ", "0");
        this.b = +prompt("Enter a value for b: ", "0");
    }
    this.sum = function(){
        return this.a + this.b;

    }
    this.mul = function(){
        return this.a * this.b;
    }
}

<button onclick="task2()">Solution</button>

            </div>


            <h4>Task 3 - Create new Accumulator</h4>

            <p>importance: 5</p>
            <p>Create a constructor function Accumulator(startingValue).</p>

            <p>Object that it creates should:</p>
            <ul>
                <li>Store the “current value” in the property value. The starting value is set to the argument of the constructor startingValue.</li>
                <li>The read() method should use prompt to read a new number and add it to value.</li>    
            </ul>

            <p>In other words, the value property is the sum of all user-entered values with the initial value startingValue.</p>

            <p>Here’s the demo of the code:</p>

            <div class="codeLines">
let accumulator = new Accumulator(1); // initial value 1

accumulator.read(); <span class="comment">// adds the user-entered value</span>
accumulator.read(); <span class="comment">// adds the user-entered value</span>

alert(accumulator.value); <span class="comment">// shows the sum of these values</span>

            </div>

            <h4>Solution</h4>

            <div class="codeLines">

let accumulator = new Accumulator(1); <span class="comment">// initial value 1</span>

accumulator.read(); <span class="comment">// adds the user-entered value</span>
accumulator.read(); <span class="comment">// adds the user-entered value</span>


alert(accumulator.value); <span class="comment">// shows the sum of these values</span>

function Accumulator(startingValue){
        
    this.value = +startingValue;
    this.read = function(){
        this.value += +prompt("How much to add? ", 0);
    }
        
}

<button onclick="task3()">Solution</button>

            </div>

            
        </div>
        <div class="column side" id="column side right"></div>

    </div>

    <div class="footer" id="footer">
    </div>


</body>

<script src="../root-js/JavaScriptInfoMenu.js"></script>
<script src="js/5-ConstructorFunctions.js"></script>


</html>