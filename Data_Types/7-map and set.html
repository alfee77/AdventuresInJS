<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="../root-css/styles.css">
    </head>
    
    <body>
        <div class = "header" id="header"></div>
        <div class="topnav" id="topnav"></div>
        <div class="row">
            <div class="column side" id="column side left"></div>
            <div class="column middle">
                <h2>Map and Set</h2>
                <p>Till now, we’ve learned about the following complex data structures:</p>
                <ul>
                    <li>Objects are used for storing <em>keyed</em> collections.</li>
                    <li>Arrays are used for storing <em>ordered</em> collections.</li>
                </ul>
                <p>But that’s not enough for real life. That’s why Map and Set also exist.</p>

                <h3>Map</h3>
                <p>Map is a collection of keyed data items, just like an Object. But the main difference is that Map allows keys of any type.</p>

                <p>Methods and properties are:</p>
                <ul>
                    <li><code>new Map()</code> – creates the map.</li>
                    <li><code>map.set(key, value)</code> – stores the value by the key.</li>
                    <li><code>map.get(key)</code> – returns the value by the key, undefined if key doesn’t exist in map.</li>
                    <li><code>map.has(key)</code> – returns true if the key exists, false otherwise.</li>
                    <li><code>map.delete(key)</code> – removes the element (the key/value pair) by the key.</li>
                    <li><code>map.clear()</code> – removes everything from the map.</li>
                    <li><code>map.size</code> – returns the current element count.</li>
                </ul>
                <p>For instance:</p>
                <div class="codeLines">
let map = new Map();

map.set('1', 'str1');   // a string key
map.set(1, 'num1');     // a numeric key
map.set(true, 'bool1'); // a boolean key
<span class="comment">// remember the regular Object? it would convert keys to string</span>
<span class="comment">// Map keeps the type, so these two are different:</span>

alert( map.get(1)   ); <span class="comment">// 'num1'</span>
alert( map.get('1') ); <span class="comment">// 'str1'</span>

alert( map.size ); <span class="comment">// 3</span>

<button onclick="example1()">Run</button>
                </div>
                <p>As we can see, unlike objects, keys are not converted to strings. Any type of key is possible.</p>
                <div class="info">
                <p>ℹ️<strong><code>map[key]</code> isn’t the right way to use a Map</strong></p>
                <p>Although <code>map[key]</code> also works, e.g. we can set <code>map[key] = 2</code>, this is treating map as a plain JavaScript object, 
                so it implies all corresponding limitations (only string/symbol keys and so on).</p>

                <p>So we should use map methods: <code>set</code>, <code>get</code> and so on.</p>
                </div>
                <p>Map can also use objects as keys. For instance:</p>
                <div class="codeLines">
let john = { name: "John" };

//for every user, let's store their visits count:
let visitsCountMap = new Map;

//john is the key for the map
visitsCountMap.set(john, 123);

alert(visitsCountMap.get(john));

<button onclick="example2()">Run</button>
                </div>
                <p>Using objects as keys is one of the smashing things about the map data type. We can't use objects as keys in objects. 
                Just to prove the point:</p>

                <div class="codeLines">
let ben = { name: "Ben" };
let john = { name: "John" };

let visitsCountObj = {}; <span class="comment">//our example object</span>

<span class="comment">//lets attempt to assign objects as keys:</span>
visitsCountObj[ben] = 134;
visitsCountObj[john] = 231;

<span class="comment">//and show what the output is when the object is then referenced via the "object" key:</span>
alert(`Here's what we get when we call visitsCountObj[ben]: ${visitsCountObj[ben]}`);
alert(`Here's what we get when we call visitsCountObj[john]: ${visitsCountObj[john]}`);

<span class="comment">//OK this next bit is a little cheeky, given we havent done the JSON tutorial yet, but it will help with the following explainer…</span>
alert(JSON.stringify(visitsCountObj));

<button onclick="example3()">Run</button>
                </div>
                <p>So lets unpick this. We have attempted to use the object <code>ben</code> as a key to the "wrapper" object <code>visitsCountObj</code> and assign the key a visit count of 134.
                Similarly, we attempt to use the object <code>john</code> to assign <code>visitsCountObj[john]</code> a visit count of 231. So you might reasonably think, as the code
                above suggests, that the visitsCountObj now has two properties:</p> 
                <ul>
                    <li><code>visitsCountObj[ben]</code>, and</li>
                    <li><code>visitsCountObj[john]</code></li>
                </ul>
                <p>with the values 134 and 231 respectively. Wrong! What we have in fact done is create the <code>visitsCountObj</code>, and then assigned it a key of <code>"[object Object]"</code> - 
                the string equivalent of the object <code>ben</code> - and assigned that key the value 134. Similarly, when we attempt to assign the value 231 to key <code>john</code>, we
                are actually assigning it to the key of <code>"[object Object]"</code>, therefore overwriting the previously assigned value. If we go ahead and convert the object to a string 
                (using <code>JSON.stringify()</code>), you can see what the actual object looks like:</p>
                <div class="output" id="stringifyOutput">
{"[object Object]":231}
                </div>
                
            
            <h3>Summary</h3>
<h4>
    Map – is a collection of keyed values.
</h4>

<p>Methods and properties:</p>

<ul>
    <li><code>new Map([iterable])</code> – creates the map, with optional iterable (e.g. array) of [key,value] pairs for initialization.</li>
    <li><code>map.set(key, value)</code> – stores the value by the key, returns the map itself.</li>
    <li><code>map.get(key)</code> – returns the value by the key, undefined if key doesn’t exist in map.</li>
    <li><code>map.has(key)</code> – returns true if the key exists, false otherwise.</li>
    <li><code>map.delete(key)</code> – removes the element by the key, returns true if key existed at the moment of the call, otherwise false.</li>
    <li><code>map.clear() </code>– removes everything from the map.</li>
    <li><code>map.size</code> – returns the current element count.</li>
</ul>
<p>The differences from a regular Object:</p>

<ul>
    <li>Any keys, objects can be keys.</li>
    <li>Additional convenient methods, the size property.</li>
</ul>
<h4>Set – is a collection of unique values.</h4>

<p>Methods and properties:</p>

<ul>
    <li><code>new Set([iterable])</code> – creates the set, with optional iterable (e.g. array) of values for initialization.</li>
    <li><code>set.add(value)</code> – adds a value (does nothing if value exists), returns the set itself.</li>
    <li><code>set.delete(value)</code> – removes the value, returns true if value existed at the moment of the call, otherwise false.</li>
    <li><code>set.has(value)</code> – returns true if the value exists in the set, otherwise false.</li>
    <li><code>set.clear()</code> – removes everything from the set.</li>
    <li><code>set.size</code> – is the elements count.</li>
</ul>
<p>Iteration over Map and Set is always in the insertion order, so we can’t say that these collections are unordered, but we can’t reorder elements or directly get an element by its number.</p>

<h3>Tasks</h3>
<div class="task">
    <h4>Task 1 - Filter unique array members</h4>
    <p>importance: 5</p>
    <p>Let arr be an array.</p>
    
    <p>Create a function unique(arr) that should return an array with unique items of arr.</p>
    
    <p>For instance:</p>
    
    <div class="codeLines">
function unique(arr) {
    <span class="comment">/* your code */</span>
}


let values = ["Hare", "Krishna", "Hare", "Krishna",
    "Krishna", "Krishna", "Hare", "Hare", ":-O"
];
    
    
alert( unique(values) ); <span class="comment">// Hare, Krishna, :-O</span>
    </div>
    <p>P.S. Here strings are used, but can be values of any type.</p>
    
    <p>P.P.S. Use Set to store unique values.</p>
<div class="task-solution">
    <h4>Solution</h4>
    <div class="output"> Jobby </div>
</div>
</div>
            </div>
            <div class="column side" id="column side right"></div>
            
        </div>

        <div class="footer" id="footer">
            
        </div>
    

    </body>

    <script src="../root-js/JavaScriptInfoMenu.js"></script>
    <script src="js/map and set.js"></script>
    

</html>